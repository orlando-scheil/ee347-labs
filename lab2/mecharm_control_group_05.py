from pymycobot import MechArm270
from pymycobot import PI_PORT, PI_BAUD
from pymycobot.mycobot import MyCobot
import time
import csv

# Initialize the robot arm
mycobot = MechArm270('/dev/ttyAMA0', '1000000')
mycobot.power_on()
mycobot.send_coords([0,0,0,0,0,0],10)

with open('robot_poses.csv', 'r') as file:
    csv_reader = csv.reader(file)
    for row in csv_reader:
        speed = 25
        angles = list(map(float, row[6:12]))
        angles[1] = angles[1] - 7
        mycobot.send_angles(angles, speed)
        time.sleep(1)

        print("Next Position")

mycobot.send_coords([0,0,0,0,0,0],10)
time.sleep(3)
mycobot.release_all_servos()

mycobot.power_off()

# 111.1,-1.6,279.9,34.55,85.01,14.55,16.96,-7.2,-27.33,123.13,-45.87,-133.41
# 48.6,63.9,195.3,172.9,77.42,-140.58,65.74,-42.97,36.73,134.64,-26.63,-132.01
# 211.4,7.6,215.7,130.55,82.3,119.91,6.5,41.13,-54.14,135.96,-24.6,-131.3
# 180.5,-21.7,222.0,-21.09,66.95,-96.73,9.84,47.9,-54.14,69.16,-82.0,-102.3
# 206.1,80.8,230.1,10.03,72.42,21.58,24.69,54.49,-73.82,96.76,-13.09,-97.91
# 128.1,49.1,205.7,-126.96,-8.23,-27.66,6.32,6.06,-15.73,42.36,65.74,-156.0
# 168.3,-31.9,177.9,-72.86,61.6,-179.45,6.94,61.25,-60.02,81.82,-111.53,-119.17
# 201.8,-43.5,239.3,76.07,59.15,56.14,-8.61,40.25,-60.11,133.06,-18.1,-106.08
# 208.6,44.0,124.7,-118.94,21.64,-34.68,-0.7,67.41,-60.11,63.98,66.7,-152.05
# 220.1,-14.9,136.3,-72.63,38.22,-132.01,8.78,72.15,-53.34,66.62,-68.81,-113.81
# 146.3,11.9,278.4,79.05,81.91,63.36,16.52,15.02,-52.55,132.71,-46.66,-136.49
# 147.9,20.2,113.4,89.09,66.56,123.78,-6.67,33.48,33.31,136.4,73.12,-140.8